<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MBA Pulse - Student Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
  <style>
        * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 50%, #fbcfe8 100%);
      background-attachment: fixed;
      color: #333;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Navigation */
    nav {
      background: rgba(253, 242, 248, 0.95);
      backdrop-filter: blur(10px);
      padding: 1rem 2rem;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      box-shadow: 0 2px 10px rgba(219, 39, 119, 0.1);
    }
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      font-family: 'Merriweather', serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: #d81b60;
    }
    .nav-links {
      display: flex;
      gap: 1.5rem;
      list-style: none;
      margin: 0;
      padding: 0;
      flex-wrap: wrap;
    }
    .nav-links a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
      transition: color 0.3s;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .nav-links a:hover, .nav-links a.active {
      color: #d81b60;
    }
    .user-info {
      display: none;
      align-items: center;
      gap: 1rem;
      font-size: 0.9rem;
    }
    .user-info.show {
      display: flex;
    }
    .logout-btn {
      background: #dc3545;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
    }

    /* Page container */
    .page {
      display: none;
      margin-top: 80px;
      flex: 1;
    }
    .page.active {
      display: block;
    }

    /* Login Page Styles */
    .login-container {
      min-height: calc(100vh - 80px);
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 2rem;
    }
    .login-box {
      background: rgba(253, 242, 248, 0.9);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(249, 168, 212, 0.3);
      padding: 3rem;
      border-radius: 16px;
      box-shadow: 0 20px 40px rgba(219, 39, 119, 0.1);
      width: 100%;
      max-width: 400px;
      text-align: center;
    }
    .login-box h2 {
      font-family: 'Merriweather', serif;
      margin-bottom: 0.5rem;
      color: #333;
    }
    .login-box p {
      color: #666;
      margin-bottom: 2rem;
    }
    .login-form {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    .form-group {
      text-align: left;
    }
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #333;
    }
    .form-group input {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s;
    }
    .form-group input:focus {
      outline: none;
      border-color: #d81b60;
    }
    .login-btn {
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      padding: 1rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: transform 0.3s;
    }
    .login-btn:hover {
      transform: translateY(-2px);
    }
    .login-switch {
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid #e9ecef;
    }
    .login-switch a {
      color: #d81b60;
      text-decoration: none;
      font-weight: 500;
    }
    .error-message {
      background: #f8d7da;
      color: #721c24;
      padding: 0.75rem;
      border-radius: 6px;
      margin-bottom: 1rem;
      display: none;
    }

    /* Hero section */
    .hero {
      position: relative;
      height: 90vh;
      background: 
        linear-gradient(135deg, rgba(219, 39, 119, 0.8) 0%, rgba(157, 23, 77, 0.8) 100%),
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><radialGradient id="a" cx="50%" cy="50%"><stop offset="0%" stop-color="%23fdf2f8"/><stop offset="100%" stop-color="%23fce7f3"/></radialGradient></defs><rect width="100%" height="100%" fill="url(%23a)"/><g fill="none" stroke="%23f9a8d4" stroke-width="2" opacity="0.3"><circle cx="200" cy="200" r="100"/><circle cx="800" cy="300" r="150"/><circle cx="300" cy="700" r="120"/><circle cx="700" cy="800" r="80"/><path d="M100,100 Q500,300 900,100"/><path d="M100,900 Q500,700 900,900"/></g></svg>');
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 2rem;
      color: #fff;
    }
    .hero-content {
      max-width: 700px;
      animation: fadeInSlide 2s ease-out forwards;
    }
    .hero h1 {
      font-family: 'Merriweather', serif;
      font-size: 3rem;
      margin-bottom: 1rem;
      opacity: 0;
      animation: fadeIn 2s ease forwards;
    }
    .hero p {
      font-size: 1.25rem;
      opacity: 0;
      animation: fadeIn 3s ease forwards;
      animation-delay: 0.5s;
    }

    @keyframes fadeInSlide {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Reading time badge */
    .reading-time {
      background: #d81b60;
      color: white;
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      position: absolute;
      top: 1rem;
      right: 1rem;
      z-index: 3;
    }

    /* Article cards */
    .articles {
      padding: 3rem 2rem;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      max-width: 1200px;
      margin: auto;
    }

    .article-card {
      position: relative;
      overflow: hidden;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(219, 39, 119, 0.1);
      cursor: pointer;
      transition: transform 0.3s ease;
      background: rgba(253, 242, 248, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(249, 168, 212, 0.3);
      height: 400px;
    }
    .delete-btn {
      position: absolute;
      top: 0.5rem;
      left: 0.5rem;
      background: #dc3545;
      color: white;
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      font-size: 0.8rem;
      cursor: pointer;
      z-index: 4;
      display: none;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }
    .delete-btn:hover {
      background: #c82333;
      transform: scale(1.1);
    }
    .admin-logged-in .delete-btn {
      display: flex;
    }
    .article-card:hover { transform: scale(1.02); }
    .article-card .card-image {
      width: 100%;
      height: 200px;
      background-size: cover;
      background-position: center;
      position: relative;
    }
    .article-card .card-image::after {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 0, 0, 0.3);
      z-index: 1;
    }
    .article-card .card-content {
      padding: 1.5rem;
      height: 200px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .article-card h3 {
      margin: 0 0 0.5rem 0;
      font-size: 1.3rem;
      font-family: 'Merriweather', serif;
      line-height: 1.4;
    }
    .article-card p {
      font-size: 0.95rem;
      margin: 0;
      color: #666;
      line-height: 1.5;
    }
    .article-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 1rem;
      font-size: 0.85rem;
      color: #888;
    }
    .article-date {
      font-weight: 500;
    }

    /* Category headers */
    .category-header {
      background: 
        linear-gradient(135deg, rgba(219, 39, 119, 0.9) 0%, rgba(157, 23, 77, 0.9) 100%),
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400"><defs><pattern id="dots" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse"><circle cx="20" cy="20" r="2" fill="%23fdf2f8" opacity="0.4"/></pattern></defs><rect width="100%" height="100%" fill="%23fce7f3"/><rect width="100%" height="100%" fill="url(%23dots)"/><path d="M0,200 Q200,100 400,200 T800,200" stroke="%23f9a8d4" stroke-width="3" fill="none" opacity="0.6"/></svg>');
      background-size: cover;
      background-position: center;
      height: 40vh;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .category-header h1 {
      color: white;
      font-family: 'Merriweather', serif;
      font-size: 3rem;
      text-align: center;
      margin: 0;
    }

    /* Content sections */
    .content-section {
      max-width: 1200px;
      margin: 0 auto;
      padding: 3rem 2rem;
    }
    .content-section h2 {
      font-family: 'Merriweather', serif;
      font-size: 2.5rem;
      margin-bottom: 2rem;
      text-align: center;
      color: #333;
    }

    /* Daily reads section */
    .daily-reads {
      background: rgba(253, 242, 248, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(249, 168, 212, 0.3);
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 3rem;
      box-shadow: 0 4px 20px rgba(219, 39, 119, 0.1);
    }
    .daily-reads h3 {
      font-family: 'Merriweather', serif;
      color: #d81b60;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }
    .daily-article {
      border-left: 4px solid #d81b60;
      padding-left: 1rem;
      margin-bottom: 1.5rem;
      cursor: pointer;
      transition: background 0.3s;
      position: relative;
    }
    .daily-article:hover {
      background: #f8f9fa;
    }
    .daily-article h4 {
      margin: 0 0 0.5rem 0;
      font-size: 1.1rem;
      color: #333;
    }
    .daily-article p {
      margin: 0;
      color: #666;
      font-size: 0.9rem;
    }

    /* Admin Panel Styles */
    .admin-panel {
      max-width: 1000px;
      margin: 0 auto;
      padding: 2rem;
      background: rgba(253, 242, 248, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(249, 168, 212, 0.3);
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(219, 39, 119, 0.1);
    }
    
    /* Admin Tabs */
    .admin-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
      border-bottom: 2px solid #e9ecef;
      max-width: 1000px;
      margin-left: auto;
      margin-right: auto;
    }
    .tab-btn {
      background: none;
      border: none;
      padding: 1rem 1.5rem;
      cursor: pointer;
      border-radius: 8px 8px 0 0;
      font-size: 0.9rem;
      font-weight: 500;
      color: #666;
      transition: all 0.3s;
    }
    .tab-btn.active {
      background: #d81b60;
      color: white;
    }
    .tab-btn:hover:not(.active) {
      background: #f8f9fa;
      color: #333;
    }
    
    /* Admin Tab Content */
    .admin-tab-content {
      display: none;
    }
    .admin-tab-content.active {
      display: block;
    }
    
    /* Admin Sections */
    .admin-section {
      margin-bottom: 2rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid #e9ecef;
    }
    .admin-section:last-child {
      border-bottom: none;
    }
    
    /* Students Table */
    .students-table-container {
      overflow-x: auto;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .students-table {
      width: 100%;
      border-collapse: collapse;
      background: white;
    }
    .students-table th,
    .students-table td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid #e9ecef;
    }
    .students-table th {
      background: #f8f9fa;
      font-weight: 600;
      color: #333;
    }
    .students-table tr:hover {
      background: #f8f9fa;
    }
    .status-badge {
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
    }
    .status-active {
      background: #d4edda;
      color: #155724;
    }
    .status-inactive {
      background: #f8d7da;
      color: #721c24;
    }
    .action-btn {
      background: none;
      border: 1px solid #d81b60;
      color: #d81b60;
      padding: 0.25rem 0.75rem;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.8rem;
      margin-right: 0.5rem;
      transition: all 0.3s;
    }
    .action-btn:hover {
      background: #d81b60;
      color: white;
    }
    .action-btn.danger {
      border-color: #dc3545;
      color: #dc3545;
    }
    .action-btn.danger:hover {
      background: #dc3545;
      color: white;
    }
    .admin-form {
      display: grid;
      gap: 1.5rem;
    }
    .admin-form .form-group {
      display: flex;
      flex-direction: column;
    }
    .admin-form .form-group label {
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #333;
    }
    .admin-form .form-group input,
    .admin-form .form-group select,
    .admin-form .form-group textarea {
      padding: 0.75rem;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      font-size: 1rem;
      font-family: inherit;
    }
    .admin-form .form-group textarea {
      min-height: 200px;
      resize: vertical;
    }
    .admin-btn {
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      padding: 1rem 2rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: transform 0.3s;
    }
    .admin-btn:hover {
      transform: translateY(-2px);
    }
    .success-message {
      background: #d4edda;
      color: #155724;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 1rem;
      display: none;
    }

    /* User Dashboard Styles */
    .user-dashboard {
      max-width: 1000px;
      margin: 0 auto;
      padding: 2rem;
    }
    .dashboard-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 3rem;
    }
    .stat-card {
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      text-align: center;
    }
    .stat-number {
      font-size: 2rem;
      font-weight: 700;
      color: #d81b60;
      margin-bottom: 0.5rem;
    }
    .stat-label {
      color: #666;
      font-size: 0.9rem;
    }
    .reading-history {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    .reading-history h3 {
      margin-bottom: 1.5rem;
      color: #333;
    }
    .history-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 0;
      border-bottom: 1px solid #e9ecef;
    }
    .history-item:last-child {
      border-bottom: none;
    }

    /* Modal popup */
    .modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal-content {
      background: rgba(253, 242, 248, 0.95);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(249, 168, 212, 0.3);
      padding: 2rem;
      max-width: 800px;
      border-radius: 12px;
      max-height: 90vh;
      overflow-y: auto;
      line-height: 1.6;
      margin: 1rem;
      box-shadow: 0 20px 40px rgba(219, 39, 119, 0.2);
    }
    .modal-content h2 {
      margin-top: 0;
      font-family: 'Merriweather', serif;
    }
    .close-btn {
      float: right;
      font-size: 1.5rem;
      cursor: pointer;
      color: #333;
      background: none;
      border: none;
    }

    /* Footer styles */
    footer {
      background: rgba(253, 242, 248, 0.9);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(249, 168, 212, 0.3);
      color: #333;
      text-align: center;
      padding: 2rem 1rem;
      margin-top: auto;
    }
    .footer-links {
      margin-bottom: 1rem;
    }
    .footer-links a {
      color: #333;
      margin: 0 10px;
      text-decoration: none;
      transition: color 0.3s;
      cursor: pointer;
    }
    .footer-links a:hover {
      color: #d81b60;
    }

    /* Access denied message */
    .access-denied {
      text-align: center;
      padding: 3rem;
      background: white;
      border-radius: 12px;
      margin: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    .access-denied h2 {
      color: #dc3545;
      margin-bottom: 1rem;
    }

    /* Responsive design */
    @media (max-width: 768px) {
      .nav-links {
        gap: 1rem;
        font-size: 0.8rem;
      }
      .hero h1 {
        font-size: 2rem;
      }
      .articles {
        grid-template-columns: 1fr;
        padding: 2rem 1rem;
      }
      .category-header h1 {
        font-size: 2rem;
      }
      .login-box {
        padding: 2rem;
      }
    }

    /* Notification styles */
    .notification {
      position: fixed;
      top: 100px;
      right: 20px;
      background: #28a745;
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      z-index: 1001;
      transform: translateX(400px);
      transition: transform 0.3s ease;
    }
    .notification.show {
      transform: translateX(0);
    }
    .notification.error {
      background: #dc3545;
    }

  </style>

  
</head>
<body>
  <!-- Navigation -->
  <nav>
    <div class="nav-container">
      <div class="logo">MBA Pulse</div>
      <div style="display: flex; align-items: center; gap: 2rem;">
        <ul class="nav-links" id="main-nav">
          <li><a href="#" onclick="showPage('home')" class="active">Home</a></li>
          <li><a href="#" onclick="showPage('strategy')">Strategy</a></li>
          <li><a href="#" onclick="showPage('finance')">Finance</a></li>
          <li><a href="#" onclick="showPage('leadership')">Leadership</a></li>
          <li><a href="#" onclick="showPage('marketing')">Marketing</a></li>
          <li><a href="#" onclick="showPage('operations')">Operations</a></li>
          <li><a href="#" onclick="showPage('entrepreneurship')">Entrepreneurship</a></li>
          <li><a href="#" onclick="showPage('contact')">Contact</a></li>
        </ul>
        <div class="user-info" id="user-info">
          <span id="user-name"></span>
          <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
        <ul class="nav-links" id="auth-nav">
          <li><a href="#" onclick="showPage('login')">Login</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Notification -->
  <div id="notification" class="notification"></div>

  <!-- Login Page -->
  <div id="login" class="page">
    <div class="login-container">
      <div class="login-box">
        <h2 id="login-title">Welcome Back</h2>
        <p id="login-subtitle">Sign in to access MBA Pulse</p>
        
        <div class="error-message" id="login-error"></div>
        
        <form class="login-form" onsubmit="handleLogin(event)" id="login-form">
          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="username" required>
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="password" required>
          </div>
          <button type="submit" class="login-btn" id="login-btn-text">Sign In</button>
        </form>
        
        <div class="login-switch">
          <p>Switch login type:</p>
          <a href="#" onclick="switchLoginType()" id="login-switch-link">Admin Login</a>
        </div>
        
        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e9ecef; font-size: 0.9rem; color: #666;">
          <p><strong>Demo Credentials:</strong></p>
          <p>Admin: <code>admin</code> / <code>admin123</code></p>
          <p>Student: Register through admin panel</p>
        </div>
      </div>
    </div>
  </div>

  <!-- User Dashboard -->
  <div id="user-dashboard" class="page">
    <div class="category-header">
      <h1>My Dashboard</h1>
    </div>
    <section class="content-section">
      <div class="user-dashboard">
        <div class="dashboard-stats">
          <div class="stat-card">
            <div class="stat-number" id="articles-read">0</div>
            <div class="stat-label">Articles Read</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="reading-time">0</div>
            <div class="stat-label">Minutes Read</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="streak-days">0</div>
            <div class="stat-label">Day Streak</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="favorite-category">Strategy</div>
            <div class="stat-label">Favorite Topic</div>
          </div>
        </div>
        
        <div class="reading-history">
          <h3>üìö Recent Reading History</h3>
          <div id="reading-history-list">
            <p style="color: #666; font-style: italic;">Start reading articles to see your history here!</p>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Home Page -->
  <div id="home" class="page active">
    <section class="hero">
      <div class="hero-content">
        <h1>Welcome to MBA Pulse</h1>
        <p>Your daily dose of business insights in bite-sized reads</p>
      </div>
    </section>

    <section class="content-section">
      <div class="daily-reads">
        <h3>üìÖ Today's Must-Reads</h3>
        <div id="home-daily-articles">
          <!-- Daily articles will be populated here -->
        </div>
      </div>

      <div class="weekly-archive" style="background: rgba(253, 242, 248, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(249, 168, 212, 0.3); border-radius: 12px; padding: 2rem; margin-bottom: 3rem; box-shadow: 0 4px 20px rgba(219, 39, 119, 0.1);">
        <h3 style="color: #d81b60; margin-bottom: 1.5rem; font-size: 1.5rem;">üìö This Week's Archive</h3>
        <p style="color: #666; margin-bottom: 1rem; font-size: 0.9rem;">Catch up on articles from the past 7 days</p>
        <div id="weekly-archive-content">
          <!-- Weekly articles will be populated here -->
        </div>
      </div>

      <h2>Featured Categories</h2>
      <div class="articles">
        <div class="article-card" onclick="showPage('strategy')">
          <div class="reading-time">Multiple reads</div>
          <div class="card-image" style="background: 
            linear-gradient(135deg, rgba(219, 39, 119, 0.8) 0%, rgba(157, 23, 77, 0.8) 100%),
            url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 400 200\"><defs><pattern id=\"chess\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" patternUnits=\"userSpaceOnUse\"><rect width=\"10\" height=\"10\" fill=\"%23fdf2f8\" opacity=\"0.3\"/><rect x=\"10\" y=\"10\" width=\"10\" height=\"10\" fill=\"%23fdf2f8\" opacity=\"0.3\"/></pattern></defs><rect width=\"100%\" height=\"100%\" fill=\"url(%23chess)\"/><circle cx=\"100\" cy=\"50\" r=\"30\" fill=\"none\" stroke=\"%23f9a8d4\" stroke-width=\"2\" opacity=\"0.5\"/><circle cx=\"300\" cy=\"150\" r=\"40\" fill=\"none\" stroke=\"%23f9a8d4\" stroke-width=\"2\" opacity=\"0.5\"/></svg>');
            background-size: cover;"></div>
          <div class="card-content">
            <h3>Strategic Management</h3>
            <p>Master competitive strategy, market positioning, and long-term planning with real-world case studies and frameworks.</p>
            <div class="article-meta">
              <span class="article-date">Updated Daily</span>
              <span id="strategy-count">0 Articles</span>
            </div>
          </div>
        </div>

        <div class="article-card" onclick="showPage('finance')">
          <div class="reading-time">Multiple reads</div>
          <div class="card-image" style="background: 
            linear-gradient(135deg, rgba(219, 39, 119, 0.8) 0%, rgba(157, 23, 77, 0.8) 100%),
            url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 400 200\"><defs><pattern id=\"money\" x=\"0\" y=\"0\" width=\"30\" height=\"30\" patternUnits=\"userSpaceOnUse\"><circle cx=\"15\" cy=\"15\" r=\"8\" fill=\"none\" stroke=\"%23f9a8d4\" stroke-width=\"1.5\" opacity=\"0.4\"/><text x=\"15\" y=\"19\" text-anchor=\"middle\" font-size=\"8\" fill=\"%23fdf2f8\" opacity=\"0.6\">$</text></pattern></defs><rect width=\"100%\" height=\"100%\" fill=\"url(%23money)\"/><path d=\"M0,100 Q100,50 200,100 T400,100\" stroke=\"%23f9a8d4\" stroke-width=\"3\" fill=\"none\" opacity=\"0.6\"/></svg>');
            background-size: cover;"></div>
          <div class="card-content">
            <h3>Corporate Finance</h3>
            <p>Deep dive into financial analysis, valuation methods, and investment decisions that drive business success.</p>
            <div class="article-meta">
              <span class="article-date">Updated Daily</span>
              <span id="finance-count">0 Articles</span>
            </div>
          </div>
        </div>

        <div class="article-card" onclick="showPage('leadership')">
          <div class="reading-time">Multiple reads</div>
          <div class="card-image" style="background: 
            linear-gradient(135deg, rgba(219, 39, 119, 0.8) 0%, rgba(157, 23, 77, 0.8) 100%),
            url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 400 200\"><defs><pattern id=\"network\" x=\"0\" y=\"0\" width=\"50\" height=\"50\" patternUnits=\"userSpaceOnUse\"><circle cx=\"25\" cy=\"25\" r=\"3\" fill=\"%23f9a8d4\" opacity=\"0.5\"/><line x1=\"25\" y1=\"25\" x2=\"50\" y2=\"25\" stroke=\"%23f9a8d4\" stroke-width=\"1\" opacity=\"0.3\"/><line x1=\"25\" y1=\"25\" x2=\"25\" y2=\"50\" stroke=\"%23f9a8d4\" stroke-width=\"1\" opacity=\"0.3\"/></pattern></defs><rect width=\"100%\" height=\"100%\" fill=\"url(%23network)\"/><circle cx=\"200\" cy=\"100\" r=\"50\" fill=\"none\" stroke=\"%23f9a8d4\" stroke-width=\"2\" opacity=\"0.4\"/></svg>');
            background-size: cover;"></div>
          <div class="card-content">
            <h3>Leadership & Management</h3>
            <p>Develop essential leadership skills, team management techniques, and organizational behavior insights.</p>
            <div class="article-meta">
              <span class="article-date">Updated Daily</span>
              <span id="leadership-count">0 Articles</span>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Admin Page -->
  <div id="admin" class="page">
    <div id="admin-access-denied" class="access-denied" style="display: none;">
      <h2>üîí Access Denied</h2>
      <p>You need admin privileges to access this page.</p>
      <p><a href="#" onclick="showPage('login')" style="color: #d81b60;">Login as Admin</a></p>
    </div>
    
    <div id="admin-content" style="display: none;">
      <div class="category-header">
        <h1>Admin Panel</h1>
      </div>
      <section class="content-section">
        <!-- Admin Navigation Tabs -->
        <div class="admin-tabs">
          <button class="tab-btn active" onclick="showAdminTab('articles')">üìù Manage Articles</button>
          <button class="tab-btn" onclick="showAdminTab('students')">üë• Manage Students</button>
          <button class="tab-btn" onclick="showAdminTab('database')">üíæ Database Settings</button>
        </div>

        <!-- Articles Management Tab -->
        <div id="admin-articles" class="admin-tab-content active">
          <div class="admin-panel">
            <div class="success-message" id="success-message">
              Article added successfully! üéâ
            </div>
            
            <h2>Add New Article</h2>
            <form class="admin-form" onsubmit="addArticle(event)">
              <div class="form-group">
                <label for="article-title">Article Title</label>
                <input type="text" id="article-title" required placeholder="e.g., Tesla's Supply Chain Revolution">
              </div>
              
              <div class="form-group">
                <label for="article-summary">Short Summary</label>
                <input type="text" id="article-summary" required placeholder="Brief description for the card preview">
              </div>
              
              <div class="form-group">
                <label for="article-content">Full Article Content</label>
                <textarea id="article-content" required placeholder="Write your full article here. Use simple paragraphs - formatting will be added automatically."></textarea>
              </div>
              
              <div class="form-group">
                <label for="article-category">Category</label>
                <select id="article-category" required>
                  <option value="">Select Category</option>
                  <option value="strategy">Strategy</option>
                  <option value="finance">Finance</option>
                  <option value="leadership">Leadership</option>
                  <option value="marketing">Marketing</option>
                  <option value="operations">Operations</option>
                  <option value="entrepreneurship">Entrepreneurship</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="reading-time">Reading Time (minutes)</label>
                <select id="reading-time" required>
                  <option value="">Select Reading Time</option>
                  <option value="2">2 min read</option>
                  <option value="3">3 min read</option>
                  <option value="4">4 min read</option>
                  <option value="5">5 min read</option>
                  <option value="6">6 min read</option>
                  <option value="7">7 min read</option>
                </select>
              </div>
              
              <button type="submit" class="admin-btn">Add Article</button>
            </form>
          </div>
        </div>

        <!-- Students Management Tab -->
        <div id="admin-students" class="admin-tab-content">
          <div class="admin-panel">
            <div class="success-message" id="student-success-message">
              Student added successfully! üéâ
            </div>
            
            <div class="admin-section">
              <h2>Add New Student</h2>
              <form class="admin-form" onsubmit="addStudent(event)">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                  <div class="form-group">
                    <label for="student-name">Full Name</label>
                    <input type="text" id="student-name" required placeholder="e.g., John Doe">
                  </div>
                  
                  <div class="form-group">
                    <label for="student-usn">USN (University Seat Number)</label>
                    <input type="text" id="student-usn" required placeholder="e.g., 1MS21MBA001" style="text-transform: uppercase;">
                  </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                  <div class="form-group">
                    <label for="student-email">Email Address</label>
                    <input type="email" id="student-email" required placeholder="e.g., john.doe@gmail.com">
                  </div>
                  
                  <div class="form-group">
                    <label for="student-phone">Phone Number</label>
                    <input type="tel" id="student-phone" required placeholder="e.g., +91 9876543210">
                  </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                  <div class="form-group">
                    <label for="student-batch">Batch/Year</label>
                    <select id="student-batch" required>
                      <option value="">Select Batch</option>
                      <option value="2024-2026">2024-2026</option>
                      <option value="2023-2025">2023-2025</option>
                      <option value="2022-2024">2022-2024</option>
                    </select>
                  </div>
                  
                  <div class="form-group">
                    <label for="student-specialization">Specialization</label>
                    <select id="student-specialization" required>
                      <option value="">Select Specialization</option>
                      <option value="Finance">Finance</option>
                      <option value="Marketing">Marketing</option>
                      <option value="HR">Human Resources</option>
                      <option value="Operations">Operations</option>
                      <option value="Strategy">Strategy</option>
                      <option value="General">General Management</option>
                    </select>
                  </div>
                </div>
                
                <button type="submit" class="admin-btn">Add Student & Generate Login</button>
              </form>
            </div>

            <!-- Students List -->
            <div class="admin-section" style="margin-top: 3rem;">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h3>Registered Students</h3>
                <div style="display: flex; gap: 1rem;">
                  <button class="admin-btn" onclick="exportStudentData()" style="background: #17a2b8; padding: 0.5rem 1rem;">
                    üìä Export Data
                  </button>
                </div>
              </div>
              
              <div class="search-filter" style="margin-bottom: 1rem;">
                <input type="text" id="student-search" placeholder="Search by name, USN, or email..." 
                       onkeyup="filterStudents()" style="width: 100%; padding: 0.75rem; border: 2px solid #e9ecef; border-radius: 8px;">
              </div>
              
              <div class="students-table-container">
                <table class="students-table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>USN</th>
                      <th>Email</th>
                      <th>Phone</th>
                      <th>Batch</th>
                      <th>Username</th>
                      <th>Status</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="students-table-body">
                    <!-- Students will be populated here -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Database Settings Tab -->
        <div id="admin-database" class="admin-tab-content">
          <div class="admin-panel">
            <h2>Database Configuration</h2>
            
            <div class="database-status" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
              <h4>üìä Current Database Status</h4>
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                <div class="stat-item">
                  <strong>Total Students:</strong> <span id="total-students">0</span>
                </div>
                <div class="stat-item">
                  <strong>Active Users:</strong> <span id="active-users">0</span>
                </div>
                <div class="stat-item">
                  <strong>Total Articles:</strong> <span id="total-articles">0</span>
                </div>
                <div class="stat-item">
                  <strong>Storage:</strong> <span id="storage-info">Local Browser</span>
                </div>
              </div>
            </div>

            <div class="admin-section" style="margin-top: 2rem;">
              <h3>‚öôÔ∏è Database Actions</h3>
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                <button class="admin-btn" onclick="backupData()" style="background: #28a745;">
                  üíæ Backup All Data
                </button>
                <button class="admin-btn" onclick="importData()" style="background: #17a2b8;">
                  üì• Import Data
                </button>
                <button class="admin-btn" onclick="clearAllData()" style="background: #dc3545;">
                  üóëÔ∏è Clear All Data
                </button>
                <button class="admin-btn" onclick="generateReport()" style="background: #6f42c1;">
                  üìà Generate Report
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- Category Pages -->
  <div id="strategy" class="page">
    <div class="category-header">
      <h1>Strategic Management</h1>
    </div>
    <section class="content-section">
      <div class="daily-reads">
        <h3>üéØ Today's Strategy Insights</h3>
        <div id="strategy-daily-articles">
          <!-- Daily articles will be populated here -->
        </div>
      </div>
      
      <div class="weekly-archive" style="background: rgba(253, 242, 248, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(249, 168, 212, 0.3); border-radius: 12px; padding: 2rem; margin-bottom: 3rem; box-shadow: 0 4px 20px rgba(219, 39, 119, 0.1);">
        <h3 style="color: #d81b60; margin-bottom: 1.5rem; font-size: 1.5rem;">üìö This Week's Strategy Articles</h3>
        <div id="strategy-weekly-archive">
          <!-- Weekly articles will be populated here -->
        </div>
      </div>
      <div class="articles" id="strategy-articles">
        <!-- Strategy articles will be populated here -->
      </div>
    </section>
  </div>

  <div id="finance" class="page">
    <div class="category-header">
      <h1>Corporate Finance</h1>
    </div>
    <section class="content-section">
      <div class="daily-reads">
        <h3>üí∞ Today's Finance Focus</h3>
        <div id="finance-daily-articles">
          <!-- Daily articles will be populated here -->
        </div>
      </div>
      
      <div class="weekly-archive" style="background: rgba(253, 242, 248, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(249, 168, 212, 0.3); border-radius: 12px; padding: 2rem; margin-bottom: 3rem; box-shadow: 0 4px 20px rgba(219, 39, 119, 0.1);">
        <h3 style="color: #d81b60; margin-bottom: 1.5rem; font-size: 1.5rem;">üìö This Week's Finance Articles</h3>
        <div id="finance-weekly-archive">
          <!-- Weekly articles will be populated here -->
        </div>
      </div>
      <div class="articles" id="finance-articles">
        <!-- Finance articles will be populated here -->
      </div>
    </section>
  </div>

  <div id="leadership" class="page">
    <div class="category-header">
      <h1>Leadership & Management</h1>
    </div>
    <section class="content-section">
      <div class="daily-reads">
        <h3>üë• Today's Leadership Lessons</h3>
        <div id="leadership-daily-articles">
          <!-- Daily articles will be populated here -->
        </div>
      </div>
      
      <div class="weekly-archive" style="background: rgba(253, 242, 248, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(249, 168, 212, 0.3); border-radius: 12px; padding: 2rem; margin-bottom: 3rem; box-shadow: 0 4px 20px rgba(219, 39, 119, 0.1);">
        <h3 style="color: #d81b60; margin-bottom: 1.5rem; font-size: 1.5rem;">üìö This Week's Leadership Articles</h3>
        <div id="leadership-weekly-archive">
          <!-- Weekly articles will be populated here -->
        </div>
      </div>
      <div class="articles" id="leadership-articles">
        <!-- Leadership articles will be populated here -->
      </div>
    </section>
  </div>

  <div id="marketing" class="page">
    <div class="category-header">
      <h1>Marketing & Brand Strategy</h1>
    </div>
    <section class="content-section">
      <div class="daily-reads">
        <h3>üìà Today's Marketing Insights</h3>
        <div id="marketing-daily-articles">
          <!-- Daily articles will be populated here -->
        </div>
      </div>
      
      <div class="weekly-archive" style="background: rgba(253, 242, 248, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(249, 168, 212, 0.3); border-radius: 12px; padding: 2rem; margin-bottom: 3rem; box-shadow: 0 4px 20px rgba(219, 39, 119, 0.1);">
        <h3 style="color: #d81b60; margin-bottom: 1.5rem; font-size: 1.5rem;">üìö This Week's Marketing Articles</h3>
        <div id="marketing-weekly-archive">
          <!-- Weekly articles will be populated here -->
        </div>
      </div>
      <div class="articles" id="marketing-articles">
        <!-- Marketing articles will be populated here -->
      </div>
    </section>
  </div>

  <div id="operations" class="page">
    <div class="category-header">
      <h1>Operations & Supply Chain</h1>
    </div>
    <section class="content-section">
      <div class="daily-reads">
        <h3>‚öôÔ∏è Today's Operations Focus</h3>
        <div id="operations-daily-articles">
          <!-- Daily articles will be populated here -->
        </div>
      </div>
      
      <div class="weekly-archive" style="background: #fff; border-radius: 12px; padding: 2rem; margin-bottom: 3rem; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
        <h3 style="color: #d81b60; margin-bottom: 1.5rem; font-size: 1.5rem;">üìö This Week's Operations Articles</h3>
        <div id="operations-weekly-archive">
          <!-- Weekly articles will be populated here -->
        </div>
      </div>
      <div class="articles" id="operations-articles">
        <!-- Operations articles will be populated here -->
      </div>
    </section>
  </div>

  <div id="entrepreneurship" class="page">
    <div class="category-header">
      <h1>Entrepreneurship & Innovation</h1>
    </div>
    <section class="content-section">
      <div class="daily-reads">
        <h3>üöÄ Today's Startup Insights</h3>
        <div id="entrepreneurship-daily-articles">
          <!-- Daily articles will be populated here -->
        </div>
      </div>
      
      <div class="weekly-archive" style="background: #fff; border-radius: 12px; padding: 2rem; margin-bottom: 3rem; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
        <h3 style="color: #d81b60; margin-bottom: 1.5rem; font-size: 1.5rem;">üìö This Week's Entrepreneurship Articles</h3>
        <div id="entrepreneurship-weekly-archive">
          <!-- Weekly articles will be populated here -->
        </div>
      </div>
      <div class="articles" id="entrepreneurship-articles">
        <!-- Entrepreneurship articles will be populated here -->
      </div>
    </section>
  </div>

  <!-- Contact Page -->
  <div id="contact" class="page">
    <div class="category-header">
      <h1>Get In Touch</h1>
    </div>
    <section class="content-section">
      <p style="text-align: center; margin-bottom: 3rem;">Have suggestions for topics? Want to contribute? We'd love to hear from you!</p>
      
      <form class="contact-form" onsubmit="handleContactSubmit(event)" style="max-width: 600px; margin: 0 auto; background: #fff; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
        <div style="margin-bottom: 1.5rem;">
          <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Full Name</label>
          <input type="text" name="name" required style="width: 100%; padding: 0.75rem; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem;">
        </div>
        <div style="margin-bottom: 1.5rem;">
          <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Email Address</label>
          <input type="email" name="email" required style="width: 100%; padding: 0.75rem; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem;">
        </div>
        <div style="margin-bottom: 1.5rem;">
          <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Subject</label>
          <input type="text" name="subject" required style="width: 100%; padding: 0.75rem; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem;">
        </div>
        <div style="margin-bottom: 1.5rem;">
          <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Message</label>
          <textarea name="message" rows="5" required style="width: 100%; padding: 0.75rem; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem;"></textarea>
        </div>
        <button type="submit" style="background: linear-gradient(45deg, #667eea, #764ba2); color: white; padding: 1rem 2rem; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer;">Send Message</button>
      </form>
    </section>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-links">
      <a href="#" onclick="showPage('home')">Home</a>
      <a href="#" onclick="showPage('strategy')">Strategy</a>
      <a href="#" onclick="showPage('finance')">Finance</a>
      <a href="#" onclick="showPage('leadership')">Leadership</a>
      <a href="#" onclick="showPage('contact')">Contact</a>
    </div>
    <p>&copy; 2024 MBA Pulse. All rights reserved.</p>
    <p>Daily insights for tomorrow's business leaders</p>
  </footer>

  <!-- Dynamic Modal for Articles -->
  <div id="article-modal" class="modal" onclick="closeModal('article-modal')">
    <div class="modal-content" onclick="event.stopPropagation()">
      <button class="close-btn" onclick="closeModal('article-modal')">&times;</button>
      <div id="modal-article-content">
        <!-- Article content will be populated here -->
      </div>
    </div>
  </div>
<script>
      // Global state management
    let currentUser = JSON.parse(localStorage.getItem('mba-pulse-user')) || null;
    let isAdminLogin = false;

    // Data storage
    let users = JSON.parse(localStorage.getItem('mba-pulse-users')) || {
      'admin': { password: 'admin123', role: 'admin', name: 'Admin User' }
    };

    let articles = JSON.parse(localStorage.getItem('mba-pulse-articles')) || [];
    let students = JSON.parse(localStorage.getItem('mba-pulse-students')) || [];
    let userStats = JSON.parse(localStorage.getItem('mba-pulse-user-stats')) || {
      articlesRead: 0,
      readingTime: 0,
      streakDays: 0,
      readingHistory: [],
      favoriteCategory: 'Strategy'
    };

    // Sample articles for initial setup
    const sampleArticles = [
      {
        id: 'sample-1',
        title: "Tesla's Supply Chain Revolution",
        summary: "How Elon Musk's vertical integration strategy is reshaping automotive manufacturing",
        content: "Tesla's approach to supply chain management represents a fundamental shift from traditional automotive manufacturing. Unlike legacy automakers who rely heavily on supplier networks, Tesla has embraced vertical integration as a core strategy.\n\nKey Takeaways:\n‚Ä¢ Vertical integration reduces dependency on suppliers\n‚Ä¢ In-house battery production creates competitive advantage\n‚Ä¢ Software-first approach enables rapid iteration\n‚Ä¢ Direct-to-consumer sales model eliminates dealer markups\n\nThis strategy has allowed Tesla to maintain higher margins and respond more quickly to market changes, though it requires significant capital investment upfront.",
        category: 'strategy',
        readingTime: '3',
        date: new Date().toLocaleDateString()
      },
      {
        id: 'sample-2',
        title: "Understanding WACC in Practice",
        summary: "How companies calculate and use weighted average cost of capital for decisions",
        content: "Weighted Average Cost of Capital (WACC) is a crucial metric for corporate finance decisions, representing the average rate a company expects to pay to finance its assets.\n\nWACC Formula:\nWACC = (E/V √ó Re) + (D/V √ó Rd √ó (1-Tc))\n\nPractical Applications:\n‚Ä¢ Capital budgeting and project evaluation\n‚Ä¢ Company valuation using DCF models\n‚Ä¢ Optimal capital structure decisions\n‚Ä¢ Performance measurement and benchmarking\n\nCompanies with lower WACC have competitive advantages in capital-intensive industries, as they can pursue projects that competitors cannot justify financially.",
        category: 'finance',
        readingTime: '4',
        date: new Date().toLocaleDateString()
      },
      {
        id: 'sample-3',
        title: "Remote Team Leadership",
        summary: "Best practices for managing distributed teams in the post-pandemic world",
        content: "Leading remote teams requires a fundamental shift in management approach, focusing on outcomes rather than presence.\n\nKey Strategies:\n‚Ä¢ Establish clear communication protocols\n‚Ä¢ Use asynchronous communication effectively\n‚Ä¢ Create virtual team bonding opportunities\n‚Ä¢ Focus on results, not hours worked\n‚Ä¢ Invest in proper technology and tools\n\nSuccessful remote leaders build trust through transparency, maintain regular check-ins, and create inclusive environments where all team members feel valued and heard.",
        category: 'leadership',
        readingTime: '3',
        date: new Date().toLocaleDateString()
      }
    ];

    // Initialize with sample articles if none exist
    if (articles.length === 0) {
      articles = sampleArticles;
      localStorage.setItem('mba-pulse-articles', JSON.stringify(articles));
    }

    // Auto-cleanup old articles (keep only 7 days)
    function cleanupOldArticles() {
      const sevenDaysAgo = new Date();
      sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
      
      const originalLength = articles.length;
      articles = articles.filter(article => {
        const articleDate = new Date(article.date);
        return articleDate >= sevenDaysAgo;
      });
      
      if (articles.length < originalLength) {
        localStorage.setItem('mba-pulse-articles', JSON.stringify(articles));
        console.log(`Cleaned up ${originalLength - articles.length} old articles`);
      }
    }

    // Get articles from the past 7 days (excluding today)
    function getWeeklyArticles(category = null) {
      const today = new Date().toLocaleDateString();
      const sevenDaysAgo = new Date();
      sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
      
      return articles.filter(article => {
        const articleDate = new Date(article.date);
        const isInWeek = articleDate >= sevenDaysAgo && article.date !== today;
        return category ? (isInWeek && article.category === category) : isInWeek;
      }).sort((a, b) => new Date(b.date) - new Date(a.date));
    }

    // Load weekly archive for home page
    function loadWeeklyArchive() {
      const weeklyArticles = getWeeklyArticles();
      const archiveContainer = document.getElementById('weekly-archive-content');
      
      if (!archiveContainer) return;
      
      if (weeklyArticles.length === 0) {
        archiveContainer.innerHTML = '<p style="color: #666; font-style: italic;">No articles from the past week. Check back as more content is added!</p>';
        return;
      }
      
      // Group articles by date
      const articlesByDate = {};
      weeklyArticles.forEach(article => {
        if (!articlesByDate[article.date]) {
          articlesByDate[article.date] = [];
        }
        articlesByDate[article.date].push(article);
      });
      
      archiveContainer.innerHTML = Object.entries(articlesByDate).map(([date, dayArticles]) => `
        <div style="margin-bottom: 1.5rem; border-left: 3px solid #e9ecef; padding-left: 1rem;">
          <h4 style="color: #333; margin-bottom: 0.75rem; font-size: 1rem;">${formatDateForDisplay(date)}</h4>
          ${dayArticles.map(article => `
            <div class="daily-article" onclick="openArticle('${article.id}')" style="position: relative; margin-bottom: 0.75rem;">
              ${currentUser && currentUser.role === 'admin' ? `<button class="delete-btn" onclick="deleteArticle('${article.id}', event)" title="Delete Article" style="position: absolute; top: 0.5rem; right: 0.5rem; display: flex;">√ó</button>` : ''}
              <h5 style="margin: 0 0 0.25rem 0; font-size: 0.95rem; color: #333;">${article.title} ‚Ä¢ ${article.readingTime} min read</h5>
              <p style="margin: 0; color: #666; font-size: 0.85rem;">${article.summary}</p>
              <span style="font-size: 0.75rem; color: #888; text-transform: capitalize;">${article.category}</span>
            </div>
          `).join('')}
        </div>
      `).join('');
    }

    // Load weekly archive for specific category
    function loadCategoryWeeklyArchive(category) {
      const weeklyArticles = getWeeklyArticles(category);
      const archiveContainer = document.getElementById(`${category}-weekly-archive`);
      
      if (!archiveContainer) return;
      
      if (weeklyArticles.length === 0) {
        archiveContainer.innerHTML = '<p style="color: #666; font-style: italic;">No articles from the past week in this category.</p>';
        return;
      }
      
      // Group articles by date
      const articlesByDate = {};
      weeklyArticles.forEach(article => {
        if (!articlesByDate[article.date]) {
          articlesByDate[article.date] = [];
        }
        articlesByDate[article.date].push(article);
      });
      
      archiveContainer.innerHTML = Object.entries(articlesByDate).map(([date, dayArticles]) => `
        <div style="margin-bottom: 1.5rem; border-left: 3px solid #e9ecef; padding-left: 1rem;">
          <h4 style="color: #333; margin-bottom: 0.75rem; font-size: 1rem;">${formatDateForDisplay(date)}</h4>
          ${dayArticles.map(article => `
            <div class="daily-article" onclick="openArticle('${article.id}')" style="position: relative; margin-bottom: 0.75rem;">
              ${currentUser && currentUser.role === 'admin' ? `<button class="delete-btn" onclick="deleteArticle('${article.id}', event)" title="Delete Article" style="position: absolute; top: 0.5rem; right: 0.5rem; display: flex;">√ó</button>` : ''}
              <h5 style="margin: 0 0 0.25rem 0; font-size: 0.95rem; color: #333;">${article.title} ‚Ä¢ ${article.readingTime} min read</h5>
              <p style="margin: 0; color: #666; font-size: 0.85rem;">${article.summary}</p>
            </div>
          `).join('')}
        </div>
      `).join('');
    }

    // Format date for better display
    function formatDateForDisplay(dateString) {
      const date = new Date(dateString);
      const today = new Date();
      const yesterday = new Date(today);
      yesterday.setDate(yesterday.getDate() - 1);
      
      if (date.toDateString() === today.toDateString()) {
        return 'Today';
      } else if (date.toDateString() === yesterday.toDateString()) {
        return 'Yesterday';
      } else {
        const options = { weekday: 'long', month: 'short', day: 'numeric' };
        return date.toLocaleDateString('en-US', options);
      }
    }

    // Utility functions
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = `notification ${type} show`;
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    function generateUsername(name, usn) {
      const firstName = name.split(' ')[0].toLowerCase();
      const usnSuffix = usn.slice(-4);
      return firstName + usnSuffix;
    }

    function generatePassword() {
      const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
      let password = '';
      for (let i = 0; i < 8; i++) {
        password += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return password;
    }

    // Authentication functions
    function switchLoginType() {
      isAdminLogin = !isAdminLogin;
      const title = document.getElementById('login-title');
      const subtitle = document.getElementById('login-subtitle');
      const btnText = document.getElementById('login-btn-text');
      const switchLink = document.getElementById('login-switch-link');
      
      if (isAdminLogin) {
        title.textContent = 'Admin Login';
        subtitle.textContent = 'Access the admin panel';
        btnText.textContent = 'Admin Sign In';
        switchLink.textContent = 'Student Login';
      } else {
        title.textContent = 'Welcome Back';
        subtitle.textContent = 'Sign in to access MBA Pulse';
        btnText.textContent = 'Sign In';
        switchLink.textContent = 'Admin Login';
      }
    }

    function handleLogin(event) {
      event.preventDefault();
      
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const errorDiv = document.getElementById('login-error');
      
      if (users[username] && users[username].password === password) {
        if (isAdminLogin && users[username].role !== 'admin') {
          showError('Admin credentials required for admin login');
          return;
        }
        
        currentUser = {
          username: username,
          role: users[username].role,
          name: users[username].name
        };
        
        localStorage.setItem('mba-pulse-user', JSON.stringify(currentUser));
        updateAuthUI();
        
        if (currentUser.role === 'admin') {
          showPage('admin');
        } else {
          showPage('user-dashboard');
        }
        
        document.getElementById('login-form').reset();
        errorDiv.style.display = 'none';
        showNotification(`Welcome back, ${currentUser.name}!`);
        
      } else {
        showError('Invalid username or password');
      }
    }

    function showError(message) {
      const errorDiv = document.getElementById('login-error');
      errorDiv.textContent = message;
      errorDiv.style.display = 'block';
    }

    function logout() {
      currentUser = null;
      localStorage.removeItem('mba-pulse-user');
      updateAuthUI();
      showPage('home');
      showNotification('Logged out successfully');
    }

    function updateAuthUI() {
      const userInfo = document.getElementById('user-info');
      const authNav = document.getElementById('auth-nav');
      const userName = document.getElementById('user-name');
      
      if (currentUser) {
        userInfo.classList.add('show');
        authNav.style.display = 'none';
        userName.textContent = `Welcome, ${currentUser.name}`;
        
        if (currentUser.role === 'admin') {
          document.body.classList.add('admin-logged-in');
        } else {
          document.body.classList.remove('admin-logged-in');
        }
        
        updateNavigation();
      } else {
        userInfo.classList.remove('show');
        authNav.style.display = 'block';
        document.body.classList.remove('admin-logged-in');
      }
    }

    function updateNavigation() {
      const mainNav = document.getElementById('main-nav');
      const existingAdminLink = mainNav.querySelector('[onclick="showPage(\'admin\')"]');
      const existingDashboardLink = mainNav.querySelector('[onclick="showPage(\'user-dashboard\')"]');
      
      if (existingAdminLink) existingAdminLink.parentElement.remove();
      if (existingDashboardLink) existingDashboardLink.parentElement.remove();
      
      if (currentUser) {
        if (currentUser.role === 'admin') {
          const adminLi = document.createElement('li');
          adminLi.innerHTML = '<a href="#" onclick="showPage(\'admin\')">Admin</a>';
          mainNav.insertBefore(adminLi, mainNav.lastElementChild);
        }
        
        const dashboardLi = document.createElement('li');
        dashboardLi.innerHTML = '<a href="#" onclick="showPage(\'user-dashboard\')">Dashboard</a>';
        mainNav.insertBefore(dashboardLi, mainNav.lastElementChild);
      }
    }

    // Navigation functionality
    function showPage(pageId) {
      if (pageId === 'admin' && (!currentUser || currentUser.role !== 'admin')) {
        document.getElementById('admin-access-denied').style.display = 'block';
        document.getElementById('admin-content').style.display = 'none';
      } else if (pageId === 'admin' && currentUser && currentUser.role === 'admin') {
        document.getElementById('admin-access-denied').style.display = 'none';
        document.getElementById('admin-content').style.display = 'block';
      }
      
      if (pageId === 'user-dashboard' && !currentUser) {
        showPage('login');
        return;
      }
      
      const pages = document.querySelectorAll('.page');
      pages.forEach(page => page.classList.remove('active'));
      
      document.getElementById(pageId).classList.add('active');
      
      const navLinks = document.querySelectorAll('.nav-links a');
      navLinks.forEach(link => link.classList.remove('active'));
      
      if (pageId === 'user-dashboard') {
        updateUserDashboard();
      } else if (['strategy', 'finance', 'leadership', 'marketing', 'operations', 'entrepreneurship'].includes(pageId)) {
        loadCategoryArticles(pageId);
      }
      
      window.scrollTo(0, 0);
    }

    // User dashboard functions
    function updateUserDashboard() {
      document.getElementById('articles-read').textContent = userStats.articlesRead;
      document.getElementById('reading-time').textContent = userStats.readingTime;
      document.getElementById('streak-days').textContent = userStats.streakDays;
      document.getElementById('favorite-category').textContent = userStats.favoriteCategory;
      
      const historyList = document.getElementById('reading-history-list');
      if (userStats.readingHistory.length > 0) {
        historyList.innerHTML = userStats.readingHistory.slice(-5).reverse().map(item => `
          <div class="history-item">
            <div>
              <strong>${item.title}</strong>
              <div style="font-size: 0.8rem; color: #666;">${item.category} ‚Ä¢ ${item.readingTime} min read</div>
            </div>
            <div style="font-size: 0.8rem; color: #888;">${item.date}</div>
          </div>
        `).join('');
      } else {
        historyList.innerHTML = '<p style="color: #666; font-style: italic;">Start reading articles to see your history here!</p>';
      }
    }

    // Article management
    function addArticle(event) {
      event.preventDefault();
      
      if (!currentUser || currentUser.role !== 'admin') {
        showNotification('Admin access required', 'error');
        return;
      }
      
      const title = document.getElementById('article-title').value;
      const summary = document.getElementById('article-summary').value;
      const content = document.getElementById('article-content').value;
      const category = document.getElementById('article-category').value;
      const readingTime = document.getElementById('reading-time').value;
      
      const article = {
        id: 'article-' + Date.now(),
        title,
        summary,
        content,
        category,
        readingTime,
        date: new Date().toLocaleDateString()
      };
      
      articles.unshift(article);
      localStorage.setItem('mba-pulse-articles', JSON.stringify(articles));
      
      const successMsg = document.getElementById('success-message');
      successMsg.style.display = 'block';
      setTimeout(() => {
        successMsg.style.display = 'none';
      }, 3000);
      
      event.target.reset();
      updateHomePage();
      updateArticleCounts();
      showNotification('Article added successfully!');
    }

    function deleteArticle(articleId, event) {
      if (event) {
        event.preventDefault();
        event.stopPropagation();
      }
      
      if (!currentUser || currentUser.role !== 'admin') {
        showNotification('Admin access required', 'error');
        return false;
      }
      
      const article = articles.find(a => a.id === articleId);
      if (!article) {
        showNotification('Article not found', 'error');
        return false;
      }
      
      if (confirm(`Are you sure you want to delete "${article.title}"?`)) {
        // Remove from articles array
        articles = articles.filter(article => article.id !== articleId);
        localStorage.setItem('mba-pulse-articles', JSON.stringify(articles));
        
        // Force refresh all displays
        setTimeout(() => {
          updateHomePage();
          updateArticleCounts();
          
          const currentPage = document.querySelector('.page.active').id;
          if (['strategy', 'finance', 'leadership', 'marketing', 'operations', 'entrepreneurship'].includes(currentPage)) {
            loadCategoryArticles(currentPage);
          }
          
          // Refresh weekly archive
          loadWeeklyArchive();
        }, 100);
        
        showNotification('Article deleted successfully!');
      }
      return false;
    }

    function loadCategoryArticles(category) {
      const categoryArticles = articles.filter(article => article.category === category);
      const todaysArticles = categoryArticles.filter(article => article.date === new Date().toLocaleDateString());
      
      const dailyContainer = document.getElementById(`${category}-daily-articles`);
      if (dailyContainer) {
        dailyContainer.innerHTML = todaysArticles.map(article => `
          <div class="daily-article" onclick="openArticle('${article.id}')" style="position: relative;">
            ${currentUser && currentUser.role === 'admin' ? `<button class="delete-btn" onclick="deleteArticle('${article.id}', event)" title="Delete Article" style="position: absolute; top: 0.5rem; right: 0.5rem; display: flex;">√ó</button>` : ''}
            <h4>${article.title} ‚Ä¢ ${article.readingTime} min read</h4>
            <p>${article.summary}</p>
          </div>
        `).join('') || '<p style="color: #666; font-style: italic;">No articles added today. Check back tomorrow!</p>';
      }
      
      // Load weekly archive for this category
      loadCategoryWeeklyArchive(category);
      
      const articlesContainer = document.getElementById(`${category}-articles`);
      if (articlesContainer) {
        articlesContainer.innerHTML = categoryArticles.map(article => `
          <div class="article-card" onclick="openArticle('${article.id}')">
            <button class="delete-btn" onclick="deleteArticle('${article.id}', event)" title="Delete Article">√ó</button>
            <div class="reading-time">${article.readingTime} min read</div>
            <div class="card-image" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
            <div class="card-content">
              <h3>${article.title}</h3>
              <p>${article.summary}</p>
              <div class="article-meta">
                <span class="article-date">${formatDateForDisplay(article.date)}</span>
                <span>${category.charAt(0).toUpperCase() + category.slice(1)}</span>
              </div>
            </div>
          </div>
        `).join('') || '<p style="color: #666; font-style: italic; grid-column: 1/-1; text-align: center; padding: 2rem;">No articles in this category yet.</p>';
      }
    }

    function openArticle(articleId) {
      const article = articles.find(a => a.id === articleId);
      if (!article) return;
      
      if (currentUser) {
        userStats.articlesRead++;
        userStats.readingTime += parseInt(article.readingTime);
        userStats.readingHistory.push({
          title: article.title,
          category: article.category,
          readingTime: article.readingTime,
          date: new Date().toLocaleDateString()
        });
        localStorage.setItem('mba-pulse-user-stats', JSON.stringify(userStats));
      }
      
      const modalContent = document.getElementById('modal-article-content');
      modalContent.innerHTML = `
        <h2>${article.title}</h2>
        <p><strong>${article.readingTime} min read ‚Ä¢ ${article.date}</strong></p>
        <div style="white-space: pre-line; line-height: 1.8;">${article.content}</div>
      `;
      
      document.getElementById('article-modal').style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    function updateHomePage() {
      const todaysArticles = articles.filter(article => article.date === new Date().toLocaleDateString());
      const homeDaily = document.getElementById('home-daily-articles');
      
      if (homeDaily) {
        homeDaily.innerHTML = todaysArticles.slice(0, 3).map(article => `
          <div class="daily-article" onclick="openArticle('${article.id}')" style="position: relative;">
            ${currentUser && currentUser.role === 'admin' ? `<button class="delete-btn" onclick="deleteArticle('${article.id}', event)" title="Delete Article" style="position: absolute; top: 0.5rem; right: 0.5rem; display: flex;">√ó</button>` : ''}
            <h4>${article.title} ‚Ä¢ ${article.readingTime} min read</h4>
            <p>${article.summary}</p>
          </div>
        `).join('') || '<p style="color: #666; font-style: italic;">No new articles today. Check back tomorrow!</p>';
      }
      
      // Load weekly archive for home page
      loadWeeklyArchive();
    }

    function updateArticleCounts() {
      const categories = ['strategy', 'finance', 'leadership', 'marketing', 'operations', 'entrepreneurship'];
      categories.forEach(category => {
        const count = articles.filter(article => article.category === category).length;
        const countElement = document.getElementById(`${category}-count`);
        if (countElement) {
          countElement.textContent = `${count} Article${count !== 1 ? 's' : ''}`;
        }
      });
    }

    // Student management
    function addStudent(event) {
      event.preventDefault();
      
      if (!currentUser || currentUser.role !== 'admin') {
        showNotification('Admin access required', 'error');
        return;
      }
      
      const name = document.getElementById('student-name').value;
      const usn = document.getElementById('student-usn').value.toUpperCase();
      const email = document.getElementById('student-email').value;
      const phone = document.getElementById('student-phone').value;
      const batch = document.getElementById('student-batch').value;
      const specialization = document.getElementById('student-specialization').value;
      
      if (students.find(student => student.usn === usn)) {
        showNotification('A student with this USN already exists!', 'error');
        return;
      }
      
      if (students.find(student => student.email === email)) {
        showNotification('A student with this email already exists!', 'error');
        return;
      }
      
      const username = generateUsername(name, usn);
      const password = generatePassword();
      
      const student = {
        id: 'student-' + Date.now(),
        name,
        usn,
        email,
        phone,
        batch,
        specialization,
        username,
        password,
        status: 'active',
        dateAdded: new Date().toLocaleDateString(),
        lastLogin: null
      };
      
      students.push(student);
      localStorage.setItem('mba-pulse-students', JSON.stringify(students));
      
      users[username] = {
        password: password,
        role: 'user',
        name: name,
        studentId: student.id
      };
      localStorage.setItem('mba-pulse-users', JSON.stringify(users));
      
      const successMsg = document.getElementById('student-success-message');
      successMsg.innerHTML = `
        Student added successfully! üéâ<br>
        <strong>Login Credentials:</strong><br>
        Username: <code>${username}</code><br>
        Password: <code>${password}</code>
      `;
      successMsg.style.display = 'block';
      setTimeout(() => {
        successMsg.style.display = 'none';
      }, 10000);
      
      event.target.reset();
      loadStudentsTable();
      updateDatabaseStats();
      showNotification('Student added successfully!');
    }

    function loadStudentsTable() {
      const tableBody = document.getElementById('students-table-body');
      
      if (students.length === 0) {
        tableBody.innerHTML = `
          <tr>
            <td colspan="8" style="text-align: center; color: #666; font-style: italic; padding: 2rem;">
              No students registered yet. Add your first student above!
            </td>
          </tr>
        `;
        return;
      }
      
      tableBody.innerHTML = students.map(student => `
        <tr>
          <td><strong>${student.name}</strong></td>
          <td><code>${student.usn}</code></td>
          <td>${student.email}</td>
          <td>${student.phone}</td>
          <td>${student.batch}</td>
          <td><code>${student.username}</code></td>
          <td>
            <span class="status-badge ${student.status === 'active' ? 'status-active' : 'status-inactive'}">
              ${student.status === 'active' ? '‚úÖ Active' : '‚ùå Inactive'}
            </span>
          </td>
          <td>
            <button class="action-btn" onclick="viewStudent('${student.id}')">üëÅÔ∏è View</button>
            <button class="action-btn" onclick="resetPassword('${student.id}')">üîë Reset</button>
            <button class="action-btn danger" onclick="deleteStudent('${student.id}')">üóëÔ∏è Delete</button>
          </td>
        </tr>
      `).join('');
    }

    function filterStudents() {
      const searchTerm = document.getElementById('student-search').value.toLowerCase();
      const rows = document.querySelectorAll('#students-table-body tr');
      
      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(searchTerm) ? '' : 'none';
      });
    }

    function viewStudent(studentId) {
      const student = students.find(s => s.id === studentId);
      if (!student) return;
      
      alert(`Student Details:\n\nName: ${student.name}\nUSN: ${student.usn}\nEmail: ${student.email}\nPhone: ${student.phone}\nBatch: ${student.batch}\nSpecialization: ${student.specialization}\nUsername: ${student.username}\nStatus: ${student.status}\nDate Added: ${student.dateAdded}`);
    }

    function resetPassword(studentId) {
      const student = students.find(s => s.id === studentId);
      if (!student) return;
      
      if (confirm(`Reset password for ${student.name}?`)) {
        const newPassword = generatePassword();
        student.password = newPassword;
        users[student.username].password = newPassword;
        
        students = students.map(s => s.id === studentId ? student : s);
        localStorage.setItem('mba-pulse-students', JSON.stringify(students));
        localStorage.setItem('mba-pulse-users', JSON.stringify(users));
        
        alert(`Password reset successfully!\n\nNew Password: ${newPassword}`);
        showNotification('Password reset successfully!');
      }
    }

    function deleteStudent(studentId) {
      const student = students.find(s => s.id === studentId);
      if (!student) return;
      
      if (confirm(`Delete ${student.name}? This cannot be undone.`)) {
        students = students.filter(s => s.id !== studentId);
        localStorage.setItem('mba-pulse-students', JSON.stringify(students));
        
        delete users[student.username];
        localStorage.setItem('mba-pulse-users', JSON.stringify(users));
        
        loadStudentsTable();
        updateDatabaseStats();
        showNotification('Student deleted successfully!');
      }
    }

    // Admin tab management
    function showAdminTab(tabName) {
      const tabContents = document.querySelectorAll('.admin-tab-content');
      tabContents.forEach(content => content.classList.remove('active'));
      
      const tabButtons = document.querySelectorAll('.tab-btn');
      tabButtons.forEach(btn => btn.classList.remove('active'));
      
      document.getElementById(`admin-${tabName}`).classList.add('active');
      event.target.classList.add('active');
      
      if (tabName === 'students') {
        loadStudentsTable();
        updateDatabaseStats();
      } else if (tabName === 'database') {
        updateDatabaseStats();
      }
    }

    function updateDatabaseStats() {
      document.getElementById('total-students').textContent = students.length;
      document.getElementById('active-users').textContent = students.filter(s => s.status === 'active').length;
      document.getElementById('total-articles').textContent = articles.length;
    }

    // Database management
    function exportStudentData() {
      if (students.length === 0) {
        showNotification('No student data to export', 'error');
        return;
      }
      
      const headers = ['Name', 'USN', 'Email', 'Phone', 'Batch', 'Specialization', 'Username', 'Status', 'Date Added'];
      const csvContent = [
        headers.join(','),
        ...students.map(student => [
          student.name,
          student.usn,
          student.email,
          student.phone,
          student.batch,
          student.specialization,
          student.username,
          student.status,
          student.dateAdded
        ].join(','))
      ].join('\n');
      
      const blob = new Blob([csvContent], { type: 'text/csv' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `mba-pulse-students-${new Date().toISOString().split('T')[0]}.csv`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      window.URL.revokeObjectURL(url);
      
      showNotification('Student data exported successfully!');
    }

    function backupData() {
      const backupData = {
        students: students,
        articles: articles,
        users: users,
        timestamp: new Date().toISOString()
      };
      
      const blob = new Blob([JSON.stringify(backupData, null, 2)], { type: 'application/json' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `mba-pulse-backup-${new Date().toISOString().split('T')[0]}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      window.URL.revokeObjectURL(url);
      
      showNotification('Complete backup created successfully!');
    }

    function importData() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = '.json';
      input.onchange = function(event) {
        const file = event.target.files[0];
        if (!file) return;
        
        const reader = new FileReader();
        reader.onload = function(e) {
          try {
            const backupData = JSON.parse(e.target.result);
            
            if (confirm('This will replace all current data. Are you sure?')) {
              if (backupData.students) {
                students = backupData.students;
                localStorage.setItem('mba-pulse-students', JSON.stringify(students));
              }
              if (backupData.articles) {
                articles = backupData.articles;
                localStorage.setItem('mba-pulse-articles', JSON.stringify(articles));
              }
              if (backupData.users) {
                users = backupData.users;
                localStorage.setItem('mba-pulse-users', JSON.stringify(users));
              }
              
              loadStudentsTable();
              updateDatabaseStats();
              updateHomePage();
              updateArticleCounts();
              
              showNotification('Data imported successfully!');
            }
          } catch (error) {
            showNotification('Error importing data. Please check the file format.', 'error');
          }
        };
        reader.readAsText(file);
      };
      input.click();
    }

    function clearAllData() {
      if (confirm('This will delete ALL data. This cannot be undone. Are you sure?')) {
        if (confirm('Are you REALLY sure? This action is permanent!')) {
          localStorage.removeItem('mba-pulse-students');
          localStorage.removeItem('mba-pulse-articles');
          localStorage.removeItem('mba-pulse-users');
          localStorage.removeItem('mba-pulse-user-stats');
          
          students = [];
          articles = [];
          users = { 'admin': { password: 'admin123', role: 'admin', name: 'Admin User' } };
          
          loadStudentsTable();
          updateDatabaseStats();
          updateHomePage();
          updateArticleCounts();
          
          showNotification('All data cleared successfully!');
        }
      }
    }

    function generateReport() {
      const report = {
        totalStudents: students.length,
        activeStudents: students.filter(s => s.status === 'active').length,
        totalArticles: articles.length,
        batchDistribution: {},
        specializationDistribution: {}
      };
      
      students.forEach(student => {
        report.batchDistribution[student.batch] = (report.batchDistribution[student.batch] || 0) + 1;
        report.specializationDistribution[student.specialization] = (report.specializationDistribution[student.specialization] || 0) + 1;
      });
      
      const reportText = `MBA Pulse - System Report
Generated: ${new Date().toLocaleString()}

üìä OVERVIEW
Total Students: ${report.totalStudents}
Active Students: ${report.activeStudents}
Total Articles: ${report.totalArticles}

üìö BATCH DISTRIBUTION
${Object.entries(report.batchDistribution).map(([batch, count]) => `${batch}: ${count} students`).join('\n')}

üéØ SPECIALIZATION DISTRIBUTION
${Object.entries(report.specializationDistribution).map(([spec, count]) => `${spec}: ${count} students`).join('\n')}`;
      
      const blob = new Blob([reportText], { type: 'text/plain' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `mba-pulse-report-${new Date().toISOString().split('T')[0]}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      window.URL.revokeObjectURL(url);
      
      showNotification('System report generated successfully!');
    }

    // Modal functionality
    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    // Contact form
    function handleContactSubmit(event) {
      event.preventDefault();
      
      const formData = new FormData(event.target);
      const name = formData.get('name');
      const email = formData.get('email');
      
      showNotification(`Thank you, ${name}! Your message has been received.`);
      event.target.reset();
    }

    // Initialize application
    document.addEventListener('DOMContentLoaded', function() {
      // Clean up old articles on startup
      cleanupOldArticles();
      
      updateAuthUI();
      updateHomePage();
      updateArticleCounts();
      
      // Close modal when clicking outside
      window.onclick = function(event) {
        if (event.target.classList.contains('modal')) {
          event.target.style.display = 'none';
          document.body.style.overflow = 'auto';
        }
      }
      
      // Auto-cleanup every hour
      setInterval(cleanupOldArticles, 60 * 60 * 1000);
    });
  
</script>
  
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97455cb38730c230',t:'MTc1NjA2NDg1NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>

</body>
</html>
